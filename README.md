# output_status_alarms
[{"id":"b2aa64bf.65547","type":"tab","label":"Output_Status_Alarm","disabled":false,"info":""},{"id":"b0076809.1dcba8","type":"debug","z":"b2aa64bf.65547","name":"BWMelder 1","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":450,"y":380,"wires":[]},{"id":"e947e37d.17e378","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"/Home/Alarm/BM1","qos":"0","datatype":"auto","broker":"d8d4adf0.7d5a2","x":170,"y":380,"wires":[["b0076809.1dcba8","2f3eb898.e58e28"]]},{"id":"e7948591.f3264","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"/Home/Alarm/BM2","qos":"0","datatype":"auto","broker":"d8d4adf0.7d5a2","x":170,"y":500,"wires":[["4a6f3aff.53335c","b9845808.40916"]]},{"id":"ce6aa452.9ef0d","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"/Home/Alarm/BM3","qos":"0","datatype":"auto","broker":"d8d4adf0.7d5a2","x":170,"y":620,"wires":[["91e24bd0.1a8d68","dd7c50ff.5dfdb"]]},{"id":"4a6f3aff.53335c","type":"debug","z":"b2aa64bf.65547","name":"BWMelder 2","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":450,"y":500,"wires":[]},{"id":"91e24bd0.1a8d68","type":"debug","z":"b2aa64bf.65547","name":"BWMelder 3","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":450,"y":620,"wires":[]},{"id":"66a664bf.06d3f4","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"/Home/Wetter/Alarm/Unwetter","qos":"0","datatype":"auto","broker":"d8d4adf0.7d5a2","x":200,"y":240,"wires":[["9288e39f.978128","9f83c5a6.4fa888"]]},{"id":"9288e39f.978128","type":"debug","z":"b2aa64bf.65547","name":"Sturm Alarm","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":470,"y":220,"wires":[]},{"id":"9f83c5a6.4fa888","type":"BDebug","z":"b2aa64bf.65547","name":"Debug","x":450,"y":260,"wires":[]},{"id":"2f3eb898.e58e28","type":"BDebug","z":"b2aa64bf.65547","name":"Debug","x":430,"y":420,"wires":[]},{"id":"b9845808.40916","type":"BDebug","z":"b2aa64bf.65547","name":"Debug","x":430,"y":540,"wires":[]},{"id":"dd7c50ff.5dfdb","type":"BDebug","z":"b2aa64bf.65547","name":"Debug","x":430,"y":660,"wires":[]},{"id":"e5c9ac70.6ec07","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"/Home/Status/Presence/Text","qos":"0","datatype":"auto","broker":"9fa2607d.99f8d","x":200,"y":40,"wires":[["142e65d.f0a801a"]]},{"id":"8ca4c883.6926b","type":"BDebug","z":"b2aa64bf.65547","name":"Debug","x":530,"y":80,"wires":[]},{"id":"142e65d.f0a801a","type":"debug","z":"b2aa64bf.65547","name":"Home Presence Status","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":730,"y":40,"wires":[]},{"id":"e9fe579.126a5a8","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"/Home/Wetter/Meldung","qos":"2","datatype":"auto","broker":"9fa2607d.99f8d","x":180,"y":180,"wires":[["d6551f62.17944"]]},{"id":"d6551f62.17944","type":"debug","z":"b2aa64bf.65547","name":"Wettermeldung Meldung","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":510,"y":180,"wires":[]},{"id":"b3c454d6.c293b","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"/Home/Status/Presence/True","qos":"0","datatype":"auto","broker":"9fa2607d.99f8d","x":200,"y":120,"wires":[["7a35fd70.b6ab14","8ca4c883.6926b"]]},{"id":"7a35fd70.b6ab14","type":"debug","z":"b2aa64bf.65547","name":"Home Presence True","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":820,"y":120,"wires":[]},{"id":"e488d100.868cf8","type":"debug","z":"b2aa64bf.65547","name":"TempBad","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":520,"y":780,"wires":[]},{"id":"4c4fd3bf.3928e4","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"Temperatur/Bad","qos":"0","datatype":"auto","broker":"d8d4adf0.7d5a2","x":160,"y":780,"wires":[["e488d100.868cf8","680c37ef.31149","e6a3986f.85fc9","46e4cbff.65857c"]]},{"id":"2d3ede4f.2e55a2","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"Status/SensorBad","qos":"0","datatype":"auto","broker":"d8d4adf0.7d5a2","x":170,"y":1140,"wires":[["94c3a249.cd8178","671c588a.cfd64"]]},{"id":"94c3a249.cd8178","type":"debug","z":"b2aa64bf.65547","name":"Status Sensor Bad","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":830,"y":1140,"wires":[]},{"id":"71ce978a.f288c","type":"file","z":"b2aa64bf.65547","name":"Temperatur_Bad","filename":"/home/pi/Temp_log_Bad.txt","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"none","x":840,"y":860,"wires":[[]]},{"id":"680c37ef.31149","type":"function","z":"b2aa64bf.65547","name":"Datum in ISO Format","func":"// (1) wandelt timestamp ins ISO Datumformat um\n//msg.timestamp= new Date().toISOString()\n\n// (2) beliebiges Datum festlegbar: hier: YYYY-MM-DD HH:MM.SS\n//     (Ausgabeformat wird danz am Ende zusammengestellt)\nvar now     = new Date(); \nvar year    = now.getFullYear();\nvar month   = now.getMonth()+1; \nvar day     = now.getDate();\nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nif(month.toString().length == 1) {\nvar month = '0'+month;\n}\nif(day.toString().length == 1) {\nvar day = '0'+day;\n}   \nif(hour.toString().length == 1) {\nvar hour = '0'+hour;\n}\nif(minute.toString().length == 1) {\nvar minute = '0'+minute;\n}\n\n// Variante1: wenn z.B. nicht ein vorhandener Payload\n// überschrieben werden soll, sondern um ein\n// Datum ergänzt werden soll.  \n\n//msg.timestamp = year+'-'+month+'-'+day+' '+hour+':'+minute+':'+second;\n\n// Variante 2: Function gibt die aktuelle Zeit als payload aus\nnow = day+'-'+month+'-'+year+' '+hour+':'+minute;\n\n// JSON Antwort parsen\nvar weather=(msg.payload);\n \n// Neue Nachricht mit Payload erstellen\nvar newMsg = { payload: \"Aktuelle Temperatur Bad \\n\"+now  +\" Uhr :    \"   +weather +\" °C\"};\n// Zurückgeben der Nachricht\nreturn [newMsg];","outputs":1,"noerr":0,"initialize":"","finalize":"","x":240,"y":860,"wires":[["71ce978a.f288c"]]},{"id":"9ed29429.4e9598","type":"file","z":"b2aa64bf.65547","name":"Luftfeuchte_Bad","filename":"/home/pi/Feuchte_log_Bad.txt","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"none","x":840,"y":1060,"wires":[[]]},{"id":"fdca2e6a.28d94","type":"mqtt in","z":"b2aa64bf.65547","name":"","topic":"Luftfeuchte/Bad","qos":"0","datatype":"auto","broker":"d8d4adf0.7d5a2","x":160,"y":980,"wires":[["82d6ea2f.9c1fa8","3d1689ca.468eee","3b3648da.e2582","283f9b26.b347e4"]]},{"id":"82d6ea2f.9c1fa8","type":"debug","z":"b2aa64bf.65547","name":"FeuchteBad","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":530,"y":980,"wires":[]},{"id":"3d1689ca.468eee","type":"function","z":"b2aa64bf.65547","name":"Datum in ISO Format","func":"// (1) wandelt timestamp ins ISO Datumformat um\n//msg.timestamp= new Date().toISOString()\n\n// (2) beliebiges Datum festlegbar: hier: YYYY-MM-DD HH:MM.SS\n//     (Ausgabeformat wird danz am Ende zusammengestellt)\nvar now     = new Date(); \nvar year    = now.getFullYear();\nvar month   = now.getMonth()+1; \nvar day     = now.getDate();\nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nif(month.toString().length == 1) {\nvar month = '0'+month;\n}\nif(day.toString().length == 1) {\nvar day = '0'+day;\n}   \nif(hour.toString().length == 1) {\nvar hour = '0'+hour;\n}\nif(minute.toString().length == 1) {\nvar minute = '0'+minute;\n}\n\n// Variante1: wenn z.B. nicht ein vorhandener Payload\n// überschrieben werden soll, sondern um ein\n// Datum ergänzt werden soll.  \n\n//msg.timestamp = year+'-'+month+'-'+day+' '+hour+':'+minute+':'+second;\n\n// Variante 2: Function gibt die aktuelle Zeit als payload aus\nnow = day+'-'+month+'-'+year+' '+hour+':'+minute;\n\n// JSON Antwort parsen\nvar weather=(msg.payload);\n \n// Neue Nachricht mit Payload erstellen\nvar newMsg = { payload: \"Luftfeuchtigkeit Bad \\n\"+now  +\" Uhr :    \"   +weather + \" %\"};\n// Zurückgeben der Nachricht\nreturn [newMsg];","outputs":1,"noerr":0,"initialize":"","finalize":"","x":280,"y":1060,"wires":[["9ed29429.4e9598"]]},{"id":"e6a3986f.85fc9","type":"ui_gauge","z":"b2aa64bf.65547","name":"Temperatur","group":"25bd9d50.87fe6a","order":2,"width":0,"height":0,"gtype":"gage","title":"Temperatur","label":"° C","format":"{{value | number:0}}","min":"6","max":"40","colors":["#7ddeec","#77bb41","#ca3838"],"seg1":"12","seg2":"25","x":530,"y":820,"wires":[]},{"id":"3b3648da.e2582","type":"ui_gauge","z":"b2aa64bf.65547","name":"Luftfeuchtigkeit","group":"25bd9d50.87fe6a","order":1,"width":0,"height":0,"gtype":"gage","title":"Luftfeuchtigkeit","label":"%","format":"{{value}}","min":"0","max":"100","colors":["#919191","#669c35","#00c7fc"],"seg1":"20","seg2":"45","x":540,"y":1020,"wires":[]},{"id":"671c588a.cfd64","type":"ui_text","z":"b2aa64bf.65547","group":"25bd9d50.87fe6a","order":5,"width":0,"height":0,"name":"Sensor Bad Status","label":"Sensor Status","format":"{{msg.payload}}","layout":"col-center","x":610,"y":1100,"wires":[]},{"id":"46e4cbff.65857c","type":"ui_chart","z":"b2aa64bf.65547","name":"Temp Verlauf Bad","group":"25bd9d50.87fe6a","order":4,"width":0,"height":0,"label":"Temperaturverlauf","chartType":"line","legend":"false","xformat":"dd HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"8","ymax":"40","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":550,"y":740,"wires":[[]]},{"id":"283f9b26.b347e4","type":"ui_chart","z":"b2aa64bf.65547","name":"Verlauf Luftfeuchtigkeit Bad","group":"25bd9d50.87fe6a","order":4,"width":0,"height":0,"label":"Verlauf Luftfeuchtigkeit","chartType":"line","legend":"false","xformat":"dd HH:mm","interpolate":"linear","nodata":"Verlauf Luftfeuchtigkeit Bad","dot":false,"ymin":"20","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":580,"y":940,"wires":[[]]},{"id":"d8d4adf0.7d5a2","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"9fa2607d.99f8d","type":"mqtt-broker","z":"","name":"Raspi","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"25bd9d50.87fe6a","type":"ui_group","z":"","name":"Kenndaten Bad","tab":"e92767a.242f218","order":4,"disp":true,"width":"6","collapse":false},{"id":"e92767a.242f218","type":"ui_tab","z":"","name":"Home","icon":"/Home/Wetter","disabled":false,"hidden":false}]
